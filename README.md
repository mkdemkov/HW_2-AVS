# Демков Михаил Кириллович БПИ212
# ИДЗ №2. Вариант 8
_Задание решено на 7 баллов._ Для связи пишите в тг **@filledevoler**
## **Условие задания**
Разработать программу, заменяющую все цифры (за исключением нуля) в заданной ASCII-строке римскими цифрами. То есть,
соответствующим комбинациями букв для цифр от 1 до 9.
## **Решение на 4 балла**
* Приведено решение на С (**program.c**).
* С помощью команды `gcc -S -O0 program.c` компилируем программу. Ключ -O0 нужен, чтобы получить ассемблированный файл (**program.s**), откомпилированный без отладочных и оптимизирующих опций. Комментарии были добавлены уже к модифицированному коду на ассемблере (**modified_program.s**).
* Оптимизируем полученный ассемблерный код в файл **modified_program.s** с помощью команды `gcc -O2 -Wall -masm=intel -fno-asynchronous-unwind-tables -fcf-protection=none -S program.c -o modified_program.s`. Таким образом получили ассемблерный код без лишних макросов и отладочных опций (число строк сократилось почти на 150).
* Протестируем полученные исполняемые файлы.
  * Для начала протестируем program.out. Для этого введем команду `./program.out -d test1.txt output_test1.txt` и увидим результат в файлике **output_test1.txt** (на скрине **test1_program.jpg**).
  * Теперь протестим modified_program.out. Вводим аналогичную команду, заменив лишь название исполняемого файла. Результаты в файле **modified_output_test1**.
  * Аналогичные прогоны сделаны для **test2.txt** и **test3.txt** (имена соответсвующих им выходных файлов интуитивно понятны).
  
  Как видим, результаты корректные и совпали, а значит, обе программы работают корректно!
## **Решение на 5 баллов**
* Программа изначально писалась с использованием функций (**program.c**).
* Локальные переменные также использовались (**program.c**).
* Добавил комментарии, описывающие передачу фактических параметров и перенос возвращаемого результата (**modified_program.s**).
* Добавил комментарии, описывающие связь между параметрами языка Си и регистрами.
## **Решение на 6 баллов**
* Оптимизация программы достигнута путем использования регистров процессора _**r12, r13, r14, r15**_ (компилировал с флгом -O2).
* Добавил комментарии, поясняющие эквивалентное использование регистров вместо переменных исходной программы на Си (**modified_program.s**).
* Результаты тестовых прогонов до и после оптимизации находятся соответственно в файлах:
  * **для test1:** _output_test1.txt / modified_output_test1.txt_
  * **для test2:** _output_test2.txt / modified_output_test2.txt_
  * **для test3:** _output_test3.txt / modified_output_test3.txt_
* До модификация размер программы - _509 строк_, после модификации - _374_. **Итого: минус _135_ строк.**
## **Решение на 7 баллов**
* Про файлы с аргументами командной строки: 
  * пример для работы в режиме ввода данных из файла:
    * **./modified_program.out -d test1.txt output_test1.txt**
  * пример работы в режиме случайной генерации содержимого:
    * **./modified_program.out -g 50 rand_output.txt**

    При этом здесь `-d` - это флаг для ввода данных из файла, `-g` - это флаг для генерации заданного числа символов в качестве входных параметров (из командной строки).
* Результаты тестирования представлены в файлах _output_test1.txt_ | _rand_output.txt_
* Разбить на две единицы компиляции я не успел, так как понимаю как это делать только вручную. Все остальные требования на 7 баллов вроде выполнил, может вы сможете закрыть на это глаза и подтянуть балл... Но 6 тоже неплохо!

# **Спасибо за внимание!**
